<div class="min-h-screen grid grid-cols-1 md:grid-cols-2">
  <!-- Left: Sidebar -->
  <div class="bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 text-white p-10 flex flex-col justify-between">
    <div>
      <img class="h-20 w-auto mb-6" src="assets/logos/pip.png" alt="PIP Logo" />
      <h1 class="text-3xl font-bold tracking-wide" style="font-family: 'Orbitron', sans-serif;">Pro Tracker</h1>
      <p class="mt-4 text-sm text-indigo-100">Performance Insights Portal tailored for every role.</p>
    </div>

    <!-- Role Buttons -->
    <div class="space-y-4 mt-10">
      <button class="w-full px-4 py-2 bg-white text-purple-700 font-semibold rounded-lg shadow hover:bg-purple-100 transition transform hover:scale-105"
        (click)="navigatetoemp()">Employee</button>
      <button class="w-full px-4 py-2 bg-white text-purple-700 font-semibold rounded-lg shadow hover:bg-purple-100 transition transform hover:scale-105"
        (click)="navigatetomanager()">Manager</button>
      <button class="w-full px-4 py-2 bg-white text-purple-700 font-semibold rounded-lg shadow hover:bg-purple-100 transition transform hover:scale-105"
        (click)="navigatetohr()">HR</button>
      <button class="w-full px-4 py-2 bg-white text-purple-700 font-semibold rounded-lg shadow hover:bg-purple-100 transition transform hover:scale-105"
        (click)="navigatetoadmin()">Admin</button>
    </div>

    <p class="text-xs text-indigo-200 mt-12">© 2025 Pro Tracker PIP Systems. All rights reserved.</p>
  </div>

  <!-- Right: Login Form -->
  <div class="bg-white flex items-center justify-center p-10">
    <div class="w-full max-w-sm bg-white p-6 shadow rounded space-y-4 relative">
      <h2 class="text-lg font-bold text-center text-indigo-700">{{ role }} Login</h2>

      <!-- Error Message -->
      <div *ngIf="errorMessage"
           class="bg-red-100 text-red-700 p-2 rounded flex justify-between items-center animate-fade-in-out">
        <span>{{ errorMessage }}</span>
        <button (click)="onClose()" class="text-red-500 hover:text-red-700 font-bold px-2">×</button>
      </div>

      <form (ngSubmit)="login()" class="space-y-4" autocomplete="off">
        <!-- ✅ Email input with live validation -->
        <input type="email" [(ngModel)]="email" name="email"
               (ngModelChange)="validateEmail()"
               placeholder="Email"
               class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
               required />

        <div class="relative">
          <input [type]="showPassword ? 'text' : 'password'" [(ngModel)]="password" name="password"
                 placeholder="Password" class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 pr-10" required />
          <button type="button" (click)="togglePasswordVisibility()"
                  class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
            <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>

        <!-- Forgot Password link -->
        <div class="text-right" *ngIf="role !== 'ADMIN'">
          <a (click)="navigateToForgotPassword()" class="text-sm text-indigo-600 hover:underline cursor-pointer">
            Forgot Password?
          </a>
        </div>

        <!-- Success Toast -->
        <div *ngIf="showToast"
             class="fixed top-4 right-4 z-50 bg-green-600 text-white px-4 py-2 rounded shadow-lg animate-fade-in-out">
          ✅ {{ role }} login successful
        </div>

        <!-- Submit Button -->
        <button type="submit"
                class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition disabled:opacity-50"
                [disabled]="isLoading">
          {{ isLoading ? 'Logging in...' : 'Log In' }}
        </button>
      </form>
    </div>
  </div>
</div>
